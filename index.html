<!doctype html>
<html>
<head>
<style>
body, html {
    margin: 0;
    padding: 0;
}
</style>
<meta charset="UTF-8" />
<title>LD39: Herkuel the Strong Arm</title>
<script src="js/phaser.min.js"></script>
<script src="js/phaser-input.js"></script>
</head>
<body><script type="text/javascript">
window.onload = function() {
  // This year theme is running out of power
  var game = new Phaser.Game(1024,768, Phaser.AUTO, 'LD39: Herkuel the Strong Arm',
    { init: init, preload: preload, create: create, update: update, render:render }, false, false);

  var input;
  var text;

  var debugLogging = false;

  function init() {
    game.renderer.renderSession.roundPixels = true;
    game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
    game.scale.pageAlignHorizontally;
    game.scale.pageAlignVertically;
    //Phaser.Canvas.setImageRenderingCrisp(game.canvas);
    game.stage.smoothed = true;
    game.add.plugin(PhaserInput.Plugin);
  }

  function preload () {
    // This needs to be set to "anonymous" for it to work under CDNs
    game.load.crossOrigin = "Anonymous"
    // Assets here.
    // game.load.image('bg', 'assets/LoneGalaxy.png');
    // game.load.spritesheet('player-01', 'assets/ShooterThing.png', 137, 148);
  }

  function create () {
    game.stage.backgroundColor = '#124184';
    game.time.advancedTiming = true;
    game.time.desiredFps = 60;

    var style = { font: "18px Arial", fill: "#FEFEFE" };

    input = game.add.inputField(0, 90, {
      font: '18px Arial',
      fill: '#FEFEFE',
      cursorColor : '#FEFEFE',
      fillAlpha: 0,
      fontWeight: 'bold',
      forceCase: PhaserInput.ForceCase.upper,
      borderRadius : 2,
      padding : 10,
      forceCase : "upper",
      width : 768
    });
    input.anchor.x = 0;
    input.setText(">");

    text = game.add.text(0, 50, "text text text", style);

    // Leave cursor on in input field when you hit enter.
    input.focusOutOnEnter = true;
    //start with focus on the element
    input.startFocus();
  }
  function debugLog(log){
    if(debugLogging) {
      console.log(log);
    }
  }

  function getText() {
    return input.value.replace(/^>\s*/g, '');
  }

  function update () {
    if (input.focus) {
      // Wait till the user is done
    }
    else {
      text.text = getText();
      input.setText(">");
      input.startFocus();
    }

    this.input.update();
  }

  function render () {
    game.debug.text(game.time.fps || '--', 2, 14, "#00ff00");
    game.debug.text(input || '--', 200, 16, "#00ff00");

  }
};
</script></body>
</html>
